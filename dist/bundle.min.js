var myApp=angular.module("myApp",[]).controller("AppCtrl",["$scope","$http",function($scope,$http){var refresh=function(){$http.get("/contactlist").success(function(response){$scope.contactlist=response,$scope.contact=""})};refresh(),$scope.addContact=function(){console.log("add contact clicked",$scope.contact),$http.post("/contactlist",$scope.contact).success(function(response){console.log(response),refresh()})},$scope.remove=function(id){console.log(id),$http["delete"]("/contactlist/"+id).success(function(response){refresh()})},$scope.edit=function(id){console.log(id),$http.get("/contactlist/"+id).success(function(response){console.log(response),$scope.contact=response})},$scope.update=function(){console.log($scope.contact._id),$http.put("/contactlist/"+$scope.contact._id,$scope.contact).success(function(response){refresh()})},$scope.deselect=function(){$scope.contact=""}}]),express=require("express"),mongojs=require("mongojs"),db=mongojs("contactlist",["contactlist"]),bodyParser=require("body-parser"),app=express();app.use(express["static"](__dirname+"/public")),app.use(bodyParser.json()),app.get("/contactlist",function(req,res){db.contactlist.find(function(err,docs){res.json(docs),console.log(docs)})}),app.post("/contactlist",function(req,res){console.log(req.body),db.contactlist.insert(req.body,function(err,doc){res.json(doc)})}),app["delete"]("/contactlist/:id",function(req,res){var id=req.params.id;console.log(id),db.contactlist.remove({_id:mongojs.ObjectId(id)},function(err,doc){res.json(doc)})}),app.get("/contactlist/:id",function(req,res){var id=req.params.id;console.log(id),db.contactlist.findOne({_id:mongojs.ObjectId(id)},function(err,doc){res.json(doc)})}),app.put("/contactlist/:id",function(req,res){var id=req.params.id;console.log(req.body.name),db.contactlist.findAndModify({query:{_id:mongojs.ObjectId(id)},update:{$set:{name:req.body.name,email:req.body.email,number:req.body.number}},"new":!0},function(err,doc){res.json(doc)})}),app.listen(1337),console.log("server running on 1337");